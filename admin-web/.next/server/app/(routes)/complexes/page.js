(()=>{var e={};e.id=411,e.ids=[411],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1123:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(6788),t(5866),t(5252);var s=t(3191),n=t(8716),l=t(7922),a=t.n(l),d=t(5231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(r,i);let o=["",{children:["(routes)",{children:["complexes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6788)),"C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\(routes)\\complexes\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5252)),"C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\(routes)\\complexes\\page.tsx"],u="/(routes)/complexes/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(routes)/complexes/page",pathname:"/complexes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9345:(e,r,t)=>{Promise.resolve().then(t.bind(t,8451))},8451:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(326),n=t(7577),l=t(9748),a=t(3971),d=t(6855),i=t(1479),o=t(3055),c=t(8131);function u(){let[e,r]=(0,n.useState)(""),[t,u]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[x,b]=(0,n.useState)(0),[h,g]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),[f,N]=(0,n.useState)(""),[v,k]=(0,n.useState)(""),[C,S]=(0,n.useState)(null),[w,q]=(0,n.useState)(""),[P,_]=(0,n.useState)(null),[D,E]=(0,n.useState)({}),U=(0,n.useMemo)(()=>{let r=e.toLowerCase().trim();return r?t.filter(e=>e.name.toLowerCase().includes(r)||(e.code||"").toLowerCase().includes(r)):t},[t,e]),A=(0,n.useMemo)(()=>U.filter(e=>D[String(e.id)]),[U,D]),O=[{key:"name",label:"Name",render:e=>C===e.id?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{children:"\uD83C\uDFE2"}),s.jsx("input",{autoFocus:!0,className:"rounded-md border border-input bg-background px-2 py-1 text-sm",value:w,onChange:e=>q(e.target.value)}),s.jsx("button",{className:"px-2 py-1 text-sm rounded-md border border-border",onClick:async()=>{w.trim()&&(await o.O.from("complexes").update({name:w.trim()}).eq("id",e.id),u(r=>r.map(r=>r.id===e.id?{...r,name:w.trim()}:r)),S(null))},children:"Save"}),s.jsx("button",{className:"px-2 py-1 text-sm rounded-md border border-border",onClick:()=>S(null),children:"Cancel"})]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{children:"\uD83C\uDFE2"}),s.jsx("span",{children:e.name}),s.jsx("button",{className:"px-2 py-0.5 text-xs rounded-md border border-border",onClick:()=>{S(e.id),q(e.name)},children:"Edit"})]})},{key:"code",label:"Code",render:e=>s.jsx("span",{className:"inline-flex items-center rounded-full border border-border px-2 py-0.5 text-xs bg-muted/30",children:e.code||"-"})},{key:"units",label:"Units",width:"120px",render:e=>(0,s.jsxs)("span",{className:"opacity-80",children:[e.units??0," units"]})},{key:"id",label:"Actions",width:"200px",render:e=>(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border",onClick:()=>{N(e.name),k(e.code||""),y(!0),S(e.id)},children:"Edit"}),s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border",onClick:()=>_(e.id),children:"Delete"})]})}];async function L(){if(!f.trim()){y(!1);return}if(C)await o.O.from("complexes").update({name:f.trim(),code:v.trim()||null}).eq("id",C),u(e=>e.map(e=>e.id===C?{...e,name:f.trim(),code:v.trim()||null}:e));else{let{data:e,error:r}=await o.O.from("complexes").insert({name:f.trim(),code:v.trim()||null}).select("id").single();!r&&e&&u(r=>[{id:e.id,name:f.trim(),code:v.trim()||null,units:0},...r])}y(!1),S(null)}async function M(){P&&(await o.O.from("complexes").delete().eq("id",P),u(e=>e.filter(e=>e.id!==P)),_(null))}async function F(){let e=A.map(e=>e.id);e.length&&(await o.O.from("complexes").delete().in("id",e),u(r=>r.filter(r=>!e.includes(r.id))),E({}))}return(0,s.jsxs)(l.N,{children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Complexes"}),s.jsx(a.o,{query:e,setQuery:r,onSearch:()=>{},right:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(c.j,{filename:"complexes.csv",columns:[{key:"name",label:"Name"},{key:"code",label:"Code"},{key:"units",label:"Units"}],rows:A.length?A:U}),(0,s.jsxs)("button",{className:"px-3 py-1.5 rounded-md border border-border disabled:opacity-50",disabled:0===A.length,onClick:F,children:["Delete Selected (",A.length,")"]}),s.jsx("button",{className:"rounded-md bg-primary text-primaryForeground px-3 py-2 text-sm",onClick:()=>{N(""),k(""),y(!0),S(null)},children:"Add Complex"})]})}),s.jsx(d.w,{columns:O,rows:U,selectable:!0,selected:D,onToggleRow:e=>E(r=>({...r,[String(e.id)]:!r[String(e.id)]})),onToggleAll:e=>{let r={};e&&U.forEach(e=>r[String(e.id)]=!0),E(r)}}),m?s.jsx("div",{className:"mt-2 text-sm opacity-70",children:"Loading…"}):null,(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-3",children:[s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border disabled:opacity-50",disabled:0===x,onClick:()=>b(e=>Math.max(0,e-1)),children:"Prev"}),s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border disabled:opacity-50",disabled:!h,onClick:()=>b(e=>e+1),children:"Next"})]}),(0,s.jsxs)(i.u,{open:j,onClose:()=>y(!1),title:C?"Edit Complex":"Add Complex",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx("label",{className:"text-sm",children:"Name"}),s.jsx("input",{className:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:f,onChange:e=>N(e.target.value)}),s.jsx("label",{className:"text-sm",children:"Code"}),s.jsx("input",{className:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:v,onChange:e=>k(e.target.value)})]}),s.jsx("div",{className:"mt-3 flex justify-end",children:s.jsx("button",{className:"rounded-md bg-primary text-primaryForeground px-3 py-2 text-sm",onClick:L,children:"Save"})})]}),(0,s.jsxs)(i.u,{open:null!==P,onClose:()=>_(null),title:"Confirm Delete",children:[s.jsx("div",{children:"Are you sure you want to delete this complex?"}),(0,s.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border",onClick:()=>_(null),children:"Cancel"}),s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border",onClick:M,children:"Delete"})]})]})]})}},6855:(e,r,t)=>{"use strict";t.d(r,{w:()=>l});var s=t(326),n=t(7577);function l({columns:e,rows:r,selectable:t,selected:l,onToggleRow:a,onToggleAll:d}){let[i,o]=(0,n.useState)(null),[c,u]=(0,n.useState)("asc"),m=(0,n.useMemo)(()=>{if(!i)return r;let e=[...r];return e.sort((e,r)=>{let t=e[i],s=r[i];return t<s?"asc"===c?-1:1:t>s?"asc"===c?1:-1:0}),e},[r,i,c]),p=({active:e})=>s.jsx("span",{className:"ml-1 text-xs opacity-70",children:e?"asc"===c?"↑":"↓":"↕"}),x=t&&l&&r.length>0&&r.every(e=>l[String(e.id)]);return t&&l&&r.some(e=>l[String(e.id)]),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-muted/40 sticky top-0 z-10 backdrop-blur",children:(0,s.jsxs)("tr",{children:[t?s.jsx("th",{className:"p-3 w-[42px]",children:s.jsx("input",{type:"checkbox","aria-label":"Select all rows",checked:!!x,onChange:e=>d?.(e.target.checked)})}):null,e.map(e=>(0,s.jsxs)("th",{className:"text-left p-3 cursor-pointer select-none",style:{width:e.width},onClick:()=>{var r;i===(r=e.key)?u(e=>"asc"===e?"desc":"asc"):(o(r),u("asc"))},children:[e.label,s.jsx(p,{active:i===e.key})]},String(e.key)))]})}),s.jsx("tbody",{className:"bg-card",children:m.map((r,n)=>(0,s.jsxs)("tr",{className:"border-t border-border transition-colors "+(n%2==1?"bg-muted/10 ":"")+(t&&l&&l[String(r.id)]?" bg-primary/5 ":"")+"hover:bg-muted/20",children:[t?s.jsx("td",{className:"p-3 w-[42px]",children:s.jsx("input",{type:"checkbox","aria-label":`Select row ${String(r.id)}`,checked:!!l?.[String(r.id)],onChange:()=>a?.(r)})}):null,e.map(e=>s.jsx("td",{className:"p-3",children:e.render?e.render(r):r[e.key]},String(e.key)))]},String(r.id)))})]})})}},8131:(e,r,t)=>{"use strict";t.d(r,{j:()=>n});var s=t(326);function n({filename:e,columns:r,rows:t}){return s.jsx("button",{className:"rounded-md border border-border px-3 py-2 text-sm",onClick:function(){let s=new Blob([r.map(e=>l(String(e.label))).join(",")+"\n"+t.map(e=>r.map(r=>{var t;return l(null==(t=e[r.key])?"":t instanceof Date?t.toISOString():String(t))}).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=e,a.click(),URL.revokeObjectURL(n)},title:"Export CSV",children:"Export CSV"})}function l(e){return e.includes(",")||e.includes('"')||e.includes("\n")?'"'+e.replace(/"/g,'""')+'"':e}t(7577)},3971:(e,r,t)=>{"use strict";t.d(r,{o:()=>n});var s=t(326);function n({query:e,setQuery:r,onSearch:t,right:n}){return(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("input",{className:"w-full md:w-auto flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"Search…",value:e,onChange:e=>r(e.target.value)}),s.jsx("button",{className:"rounded-md bg-primary text-primaryForeground px-3 py-2 text-sm",onClick:t,children:"Search"}),n]})}t(7577)},1479:(e,r,t)=>{"use strict";t.d(r,{u:()=>n});var s=t(326);function n({open:e,onClose:r,title:t,children:n}){return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:r}),(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-md rounded-lg border border-border bg-card p-4 shadow-card",children:[t?s.jsx("div",{className:"text-lg font-semibold mb-2",children:t}):null,s.jsx("div",{className:"space-y-3",children:n}),s.jsx("div",{className:"mt-4 flex justify-end gap-2",children:s.jsx("button",{className:"px-3 py-1.5 rounded-md border border-border",onClick:r,children:"Close"})})]})]}):null}t(7577)},6788:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`C:\Users\pc\Desktop\installments-app\admin-web\app\(routes)\complexes\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[148,434,399],()=>t(1123));module.exports=s})();