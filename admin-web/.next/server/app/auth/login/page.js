(()=>{var e={};e.id=716,e.ids=[716],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>u}),s(4595),s(5252),s(5866);var r=s(3191),n=s(8716),a=s(7922),i=s.n(a),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let u=["",{children:["auth",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4595)),"C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\auth\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3182)),"C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\auth\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5252)),"C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\pc\\Desktop\\installments-app\\admin-web\\app\\auth\\login\\page.tsx"],c="/auth/login/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/auth/login/page",pathname:"/auth/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},4496:(e,t,s)=>{Promise.resolve().then(s.bind(s,7241))},265:(e,t,s)=>{Promise.resolve().then(s.bind(s,2947)),Promise.resolve().then(s.bind(s,9977))},8601:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5303:()=>{},7241:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(326),n=s(7577),a=s(5047),i=s(3055);function o(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),[s,o]=(0,n.useState)(""),[l,u]=(0,n.useState)(""),[d,c]=(0,n.useState)(null),p=t.get("next")||"/";async function m(t){t.preventDefault(),c(null);let{error:r}=await i.O.auth.signInWithPassword({email:s,password:l});if(r){c(r.message);return}try{let{data:e}=await i.O.auth.getSession(),t=e.session?.access_token,s=e.session?.refresh_token;t&&(document.cookie=`sb-access-token=${t}; Max-Age=604800; Path=/; SameSite=Lax`),s&&(document.cookie=`sb-refresh-token=${s}; Max-Age=604800; Path=/; SameSite=Lax`)}catch{}let{data:n}=await i.O.auth.getUser(),a=n.user?.id;if(!a){c("Login failed");return}let{data:o}=await i.O.from("user_status").select("status").eq("user_id",a).single();if(!o||"approved"!==o.status){c("User is not approved yet");return}let{data:u}=await i.O.from("user_roles").select("role").eq("user_id",a).single();"admin"===u?.role?e.replace(p||"/"):e.replace("/not-authorized")}return r.jsx("main",{className:"min-h-dvh flex items-center justify-center p-6",children:(0,r.jsxs)("form",{onSubmit:m,className:"w-full max-w-sm space-y-4 bg-card text-card-foreground p-6 rounded-lg shadow-card",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Admin Login"}),d?r.jsx("p",{className:"text-sm text-red-600",children:d}):null,(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm",children:"Email"}),r.jsx("input",{className:"w-full rounded-md border border-border bg-transparent px-3 py-2 outline-none focus:ring-2 focus:ring-ring",type:"email",value:s,onChange:e=>o(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm",children:"Password"}),r.jsx("input",{className:"w-full rounded-md border border-border bg-transparent px-3 py-2 outline-none focus:ring-2 focus:ring-ring",type:"password",value:l,onChange:e=>u(e.target.value),required:!0})]}),r.jsx("button",{type:"submit",className:"h-9 rounded-md bg-primary text-primary-foreground px-4",children:"Sign in"})]})})}},2947:(e,t,s)=>{"use strict";s.d(t,{RequireRole:()=>i});var r=s(326),n=s(7577),a=s(5047);function i({allowed:e,children:t}){(0,a.useRouter)(),(0,a.usePathname)();let[s,i]=(0,n.useState)(!0);return s?r.jsx("div",{style:{padding:16},children:"Loadingâ€¦"}):r.jsx(r.Fragment,{children:t})}s(3055)},3055:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var r=s(4310);let{url:n,anonKey:a}=function(){let e="https://ulfucdrhbmmfqgqpcgsf.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVsZnVjZHJoYm1tZnFncXBjZ3NmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkzMzA1NjAsImV4cCI6MjA2NDkwNjU2MH0.Q8i0BiqN_D0IFOBIzF5MLvd564ZO9xeAJokuAWq_lmQ";if(!e||!t)throw Error("Supabase URL/Anon key missing in env");return{url:e,anonKey:t}}(),i=(0,r.eI)(n,a)},9977:(e,t,s)=>{"use strict";s.d(t,{F:()=>o,ThemeProvider:()=>i});var r=s(326),n=s(7577);let a=(0,n.createContext)(null);function i({children:e}){let[t,s]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!0),[l,u]=(0,n.useState)("ar");return r.jsx(a.Provider,{value:{dark:t,rtl:i,locale:l,toggleDark:()=>s(e=>!e),toggleRtl:()=>o(e=>!e),setLocale:u},children:e})}function o(){let e=(0,n.useContext)(a);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},3182:(e,t,s)=>{"use strict";function r({children:e}){return e}s.r(t),s.d(t,{default:()=>r})},4595:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\pc\Desktop\installments-app\admin-web\app\auth\login\page.tsx#default`)},5252:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>u});var r=s(9510),n=s(7510),a=s.n(n);s(7272);var i=s(8570);let o=(0,i.createProxy)(String.raw`C:\Users\pc\Desktop\installments-app\admin-web\lib\theme.tsx#ThemeProvider`);(0,i.createProxy)(String.raw`C:\Users\pc\Desktop\installments-app\admin-web\lib\theme.tsx#useTheme`);let l=(0,i.createProxy)(String.raw`C:\Users\pc\Desktop\installments-app\admin-web\components\RequireRole.tsx#RequireRole`),u={title:"Installments Admin",description:"Admin dashboard for payments and installments"};function d({children:e}){return r.jsx("html",{lang:"en",className:a().variable,children:r.jsx("body",{children:r.jsx(o,{children:r.jsx(l,{allowed:["admin","accountant"],children:e})})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[148],()=>s(2562));module.exports=r})();